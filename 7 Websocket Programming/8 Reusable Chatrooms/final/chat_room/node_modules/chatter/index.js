var all_sockets = null;

// set sockets function
exports.set_sockets = function  (sockets) { // function for set sockets that allows us to set the sockets from outside the module
  all_sockets = sockets;
};

// chatter function
// NOTE: the config object in this case is just compromised of some json data. (Refer to the server.js page for this)
exports.connect_chatter = function  (config) { // this function takes a (json) object for configuration
  // properties from the (json )config object are used to set different events
  config.socket.emit('entrance', {message: 'Welcome to the chat room!'});	// one of the json property values of the (json) config object is the socket that is being connected
  all_sockets.emit('entrance', {message: config.username + ' is online.'});	// we also emit an entrance event to all of the chatters on all sockets
											// notice we are using config.username. We are going identify each chatter as they enter the chat room
  config.socket.on('disconnect', function  () {
    all_sockets.emit('exit', {message: config.username + ' has disconnected.'});  // we are going identify each chatter as they disconnect
  });

  config.socket.on('chat', function  (data) {
    all_sockets.emit('chat', {message: config.username + ' says: ' + data.message}); // we are going identify each chatter as they say something
  });
};

// This is a failure function
exports.failure = function  (socket) {
  socket.emit('error', {message: 'Please log in to the chatroom.'}); // we are sending the message to "Please log in to the chatroom" to the socket.
};
